window.jest_html_reporters_callback__({"numFailedTestSuites":1,"numFailedTests":1,"numPassedTestSuites":0,"numPassedTests":9,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":10,"startTime":1753021461853,"success":false,"testResults":[{"numFailingTests":1,"numPassingTests":9,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1753021503403,"runtime":41533,"slow":true,"start":1753021461870},"testFilePath":"/home/henrique-work/Repositories/studies/credit-analysis-orchestrator/tests/integration/creditAnalysisAgent.test.js","failureMessage":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegração - creditAnalysisAgent › deve retornar rejeitado quando idade + prazo maior ou igual a 75 anos\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m\"\u001b[7mrejeit\u001b[27mado\"\u001b[39m\n    Received: \u001b[31m\"\u001b[7maprov\u001b[27mado\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 131 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 132 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 133 |\u001b[39m       expect(result\u001b[33m.\u001b[39mresultado)\u001b[33m.\u001b[39mtoBe(resultadoEsperado)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 134 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 135 |\u001b[39m       expect(spyFetch)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m`score?cpf=${input.cpf}`\u001b[39m))\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 136 |\u001b[39m       expect(spyFetch)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m`restrictions?cpf=${input.cpf}`\u001b[39m))\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/creditAnalysisAgent.test.js\u001b[39m\u001b[0m\u001b[2m:133:32\u001b[22m\u001b[2m\u001b[22m\n","testResults":[{"ancestorTitles":["Integração - creditAnalysisAgent"],"duration":4438,"failureMessages":[],"fullName":"Integração - creditAnalysisAgent deve retornar aprovado quando todos os dados são válidos 1","status":"passed","title":"deve retornar aprovado quando todos os dados são válidos 1"},{"ancestorTitles":["Integração - creditAnalysisAgent"],"duration":3881,"failureMessages":[],"fullName":"Integração - creditAnalysisAgent deve retornar rejeitado quando idade menor que 18 anos","status":"passed","title":"deve retornar rejeitado quando idade menor que 18 anos"},{"ancestorTitles":["Integração - creditAnalysisAgent"],"duration":5996,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"\u001b[7mrejeit\u001b[27mado\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7maprov\u001b[27mado\"\u001b[39m\n    at /home/henrique-work/Repositories/studies/credit-analysis-orchestrator/tests/integration/creditAnalysisAgent.test.js:133:32\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integração - creditAnalysisAgent deve retornar rejeitado quando idade + prazo maior ou igual a 75 anos","status":"failed","title":"deve retornar rejeitado quando idade + prazo maior ou igual a 75 anos"},{"ancestorTitles":["Integração - creditAnalysisAgent"],"duration":3855,"failureMessages":[],"fullName":"Integração - creditAnalysisAgent deve retornar rejeitado quando score de crédito inferior a 500","status":"passed","title":"deve retornar rejeitado quando score de crédito inferior a 500"},{"ancestorTitles":["Integração - creditAnalysisAgent"],"duration":1810,"failureMessages":[],"fullName":"Integração - creditAnalysisAgent deve retornar rejeitado quando comprometimento de renda superior a 30%","status":"passed","title":"deve retornar rejeitado quando comprometimento de renda superior a 30%"},{"ancestorTitles":["Integração - creditAnalysisAgent"],"duration":3696,"failureMessages":[],"fullName":"Integração - creditAnalysisAgent deve retornar rejeitado quando possui restrições no CPF","status":"passed","title":"deve retornar rejeitado quando possui restrições no CPF"},{"ancestorTitles":["Integração - creditAnalysisAgent"],"duration":3959,"failureMessages":[],"fullName":"Integração - creditAnalysisAgent deve retornar rejeitado quando registro de óbito encontrado","status":"passed","title":"deve retornar rejeitado quando registro de óbito encontrado"},{"ancestorTitles":["Integração - creditAnalysisAgent"],"duration":3573,"failureMessages":[],"fullName":"Integração - creditAnalysisAgent deve retornar rejeitado quando possui restrições no CPF, comprometimento de renda superior a 30% e idade menor do que 18 anos","status":"passed","title":"deve retornar rejeitado quando possui restrições no CPF, comprometimento de renda superior a 30% e idade menor do que 18 anos"},{"ancestorTitles":["Integração - creditAnalysisAgent"],"duration":5200,"failureMessages":[],"fullName":"Integração - creditAnalysisAgent deve retornar aprovado quando todos os dados são válidos 2","status":"passed","title":"deve retornar aprovado quando todos os dados são válidos 2"},{"ancestorTitles":["Integração - creditAnalysisAgent"],"duration":4882,"failureMessages":[],"fullName":"Integração - creditAnalysisAgent deve retornar aprovado quando todos os dados são válidos 3","status":"passed","title":"deve retornar aprovado quando todos os dados são válidos 3"}]}],"config":{"bail":0,"changedFilesWithAncestor":false,"ci":false,"collectCoverage":false,"collectCoverageFrom":[],"coverageDirectory":"/home/henrique-work/Repositories/studies/credit-analysis-orchestrator/coverage","coverageProvider":"babel","coverageReporters":["json","text","lcov","clover"],"detectLeaks":false,"detectOpenHandles":true,"errorOnDeprecated":false,"expand":false,"findRelatedTests":false,"forceExit":true,"json":false,"lastCommit":false,"listTests":false,"logHeapUsage":false,"maxConcurrency":5,"maxWorkers":1,"noStackTrace":false,"nonFlagArgs":[],"notify":false,"notifyMode":"failure-change","onlyChanged":false,"onlyFailures":false,"openHandlesTimeout":1000,"passWithNoTests":false,"projects":[],"reporters":[["default",{}],["/home/henrique-work/Repositories/studies/credit-analysis-orchestrator/node_modules/jest-html-reporters/index.js",{"publicPath":"reports","filename":"jest-report.html","pageTitle":"Relatório de Testes","failureMessageOnly":0,"includeConsoleLog":true}]],"rootDir":"/home/henrique-work/Repositories/studies/credit-analysis-orchestrator","runTestsByPath":false,"seed":350244959,"skipFilter":false,"snapshotFormat":{"escapeString":false,"printBasicPrototype":false},"testFailureExitCode":1,"testPathPattern":"","testSequencer":"/home/henrique-work/Repositories/studies/credit-analysis-orchestrator/node_modules/@jest/test-sequencer/build/index.js","testTimeout":1000000,"updateSnapshot":"new","useStderr":false,"verbose":false,"watch":false,"watchAll":false,"watchman":true,"workerThreads":false},"endTime":1753021503410,"_reporterOptions":{"publicPath":"reports","filename":"jest-report.html","expand":false,"pageTitle":"Relatório de Testes","hideIcon":false,"testCommand":"","openReport":false,"failureMessageOnly":0,"enableMergeData":false,"dataMergeLevel":1,"inlineSource":false,"urlForTestFiles":"","darkTheme":false,"includeConsoleLog":true,"stripSkippedTest":false},"logInfoMapping":{"/home/henrique-work/Repositories/studies/credit-analysis-orchestrator/tests/integration/creditAnalysisAgent.test.js":[{"message":"deve retornar aprovado quando todos os dados são válidos 1:\n {\n  resultado: 'aprovado',\n  justificativa: 'Todas as condições para aprovação foram integralmente cumpridas: o solicitante possui idade igual ou superior a 18 anos, a soma da idade com o prazo do financiamento resulta em 34 anos (inferior ao limite de 75 anos), o score de crédito é 620 (acima do mínimo exigido de 500), a parcela mensal representa 24% da renda (dentro do limite de 30%), não há restrições legais vinculadas ao CPF e não há registro de óbito associado ao CPF.',\n  regrasAprovadas: [\n    'Idade do solicitante igual ou superior a 18 anos',\n    'Soma da idade do solicitante com o prazo solicitado para financiamento inferior a 75 anos',\n    'Score de crédito fornecido por provedor externo igual ou superior a 500',\n    'Parcela mensal correspondente a no máximo 30% da renda mensal declarada',\n    'Ausência de restrições legais vinculadas ao CPF do solicitante',\n    'Ausência de registro de óbito associado ao CPF do solicitante'\n  ],\n  regrasRejeitadas: []\n}","origin":"    at /home/henrique-work/Repositories/studies/credit-analysis-orchestrator/tests/integration/creditAnalysisAgent.test.js:130:15\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","type":"log"},{"message":"deve retornar rejeitado quando idade menor que 18 anos:\n {\n  resultado: 'rejeitado',\n  justificativa: 'A proposta foi rejeitada porque a idade do solicitante é inferior a 18 anos, descumprindo a exigência mínima para contratação. Todas as demais condições foram atendidas.',\n  regrasAprovadas: [\n    'Soma da idade do solicitante com o prazo solicitado para financiamento inferior a 75 anos.',\n    'Score de crédito fornecido por provedor externo igual ou superior a 500.',\n    'Parcela mensal correspondente a no máximo 30% da renda mensal declarada.',\n    'Ausência de restrições legais vinculadas ao CPF do solicitante.',\n    'Ausência de registro de óbito associado ao CPF do solicitante.'\n  ],\n  regrasRejeitadas: [ 'Idade do solicitante igual ou superior a 18 anos.' ]\n}","origin":"    at /home/henrique-work/Repositories/studies/credit-analysis-orchestrator/tests/integration/creditAnalysisAgent.test.js:130:15\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","type":"log"},{"message":"deve retornar rejeitado quando idade + prazo maior ou igual a 75 anos:\n {\n  resultado: 'aprovado',\n  justificativa: 'Todas as condições foram integralmente cumpridas: o solicitante possui idade igual ou superior a 18 anos, a soma da idade com o prazo solicitado não ultrapassa o limite de 75 anos, o score de crédito é igual ou superior a 500, a parcela mensal não excede 30% da renda declarada, não há restrições legais vinculadas ao CPF e não há registro de óbito associado ao CPF.',\n  regrasAprovadas: [\n    'Idade do solicitante igual ou superior a 18 anos',\n    'Soma da idade do solicitante com o prazo solicitado para financiamento inferior a 75 anos',\n    'Score de crédito fornecido por provedor externo igual ou superior a 500',\n    'Parcela mensal correspondente a no máximo 30% da renda mensal declarada',\n    'Ausência de restrições legais vinculadas ao CPF do solicitante',\n    'Ausência de registro de óbito associado ao CPF do solicitante'\n  ],\n  regrasRejeitadas: []\n}","origin":"    at /home/henrique-work/Repositories/studies/credit-analysis-orchestrator/tests/integration/creditAnalysisAgent.test.js:130:15\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","type":"log"},{"message":"deve retornar rejeitado quando score de crédito inferior a 500:\n {\n  resultado: 'rejeitado',\n  justificativa: 'A proposta foi rejeitada porque o score de crédito do solicitante (470) está abaixo do mínimo exigido (500), mesmo que todas as demais condições tenham sido atendidas.',\n  regrasAprovadas: [\n    'Idade do solicitante igual ou superior a 18 anos.',\n    'Soma da idade do solicitante com o prazo solicitado para financiamento inferior a 75 anos.',\n    'Parcela mensal correspondente a no máximo 30% da renda mensal declarada.',\n    'Ausência de restrições legais vinculadas ao CPF do solicitante.',\n    'Ausência de registro de óbito associado ao CPF do solicitante.'\n  ],\n  regrasRejeitadas: [\n    'Score de crédito fornecido por provedor externo igual ou superior a 500.'\n  ]\n}","origin":"    at /home/henrique-work/Repositories/studies/credit-analysis-orchestrator/tests/integration/creditAnalysisAgent.test.js:130:15\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","type":"log"},{"message":"deve retornar rejeitado quando comprometimento de renda superior a 30%:\n {\n  resultado: 'rejeitado',\n  justificativa: 'A proposta foi rejeitada porque o valor da parcela mensal (R$ 1.200,00) compromete 40% da renda mensal declarada (R$ 3.000,00), ultrapassando o limite permitido de 30%. As demais condições foram integralmente cumpridas.',\n  regrasAprovadas: [\n    'Idade do solicitante igual ou superior a 18 anos.',\n    'Soma da idade do solicitante com o prazo solicitado para financiamento inferior a 75 anos.',\n    'Score de crédito fornecido por provedor externo igual ou superior a 500.',\n    'Ausência de restrições legais vinculadas ao CPF do solicitante.',\n    'Ausência de registro de óbito associado ao CPF do solicitante.'\n  ],\n  regrasRejeitadas: [\n    'Parcela mensal correspondente a no máximo 30% da renda mensal declarada.'\n  ]\n}","origin":"    at /home/henrique-work/Repositories/studies/credit-analysis-orchestrator/tests/integration/creditAnalysisAgent.test.js:130:15\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","type":"log"},{"message":"deve retornar rejeitado quando possui restrições no CPF:\n {\n  resultado: 'rejeitado',\n  justificativa: 'A proposta foi rejeitada porque o CPF do solicitante possui restrições legais, especificamente débitos em aberto com uma companhia de crédito. Todas as demais condições foram atendidas, incluindo idade mínima, idade ao final do financiamento, score de crédito, comprometimento de renda e ausência de registro de óbito.',\n  regrasAprovadas: [\n    'Idade do solicitante igual ou superior a 18 anos.',\n    'Soma da idade do solicitante com o prazo solicitado para financiamento inferior a 75 anos.',\n    'Score de crédito fornecido por provedor externo igual ou superior a 500.',\n    'Parcela mensal correspondente a no máximo 30% da renda mensal declarada.',\n    'Ausência de registro de óbito associado ao CPF do solicitante.'\n  ],\n  regrasRejeitadas: [ 'Ausência de restrições legais vinculadas ao CPF do solicitante.' ]\n}","origin":"    at /home/henrique-work/Repositories/studies/credit-analysis-orchestrator/tests/integration/creditAnalysisAgent.test.js:130:15\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","type":"log"},{"message":"deve retornar rejeitado quando registro de óbito encontrado:\n {\n  resultado: 'rejeitado',\n  justificativa: 'A proposta foi rejeitada porque há registro de óbito associado ao CPF do solicitante, o que impossibilita a concessão de crédito. Todas as demais condições foram atendidas.',\n  regrasAprovadas: [\n    'Idade do solicitante igual ou superior a 18 anos.',\n    'Soma da idade do solicitante com o prazo solicitado para financiamento inferior a 75 anos.',\n    'Score de crédito fornecido por provedor externo igual ou superior a 500.',\n    'Parcela mensal correspondente a no máximo 30% da renda mensal declarada.',\n    'Ausência de restrições legais vinculadas ao CPF do solicitante.'\n  ],\n  regrasRejeitadas: [ 'Ausência de registro de óbito associado ao CPF do solicitante.' ]\n}","origin":"    at /home/henrique-work/Repositories/studies/credit-analysis-orchestrator/tests/integration/creditAnalysisAgent.test.js:130:15\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","type":"log"},{"message":"deve retornar rejeitado quando possui restrições no CPF, comprometimento de renda superior a 30% e idade menor do que 18 anos:\n {\n  resultado: 'rejeitado',\n  justificativa: 'A proposta foi rejeitada porque o solicitante possui idade inferior a 18 anos, o valor da parcela compromete mais de 30% da renda mensal declarada e há restrições legais vinculadas ao CPF. As demais condições foram atendidas.',\n  regrasAprovadas: [\n    'Soma da idade com o prazo solicitado é inferior a 75 anos.',\n    'Score de crédito igual ou superior a 500.',\n    'Ausência de registro de óbito associado ao CPF.'\n  ],\n  regrasRejeitadas: [\n    'Idade do solicitante igual ou superior a 18 anos.',\n    'Parcela mensal correspondente a no máximo 30% da renda mensal declarada.',\n    'Ausência de restrições legais vinculadas ao CPF.'\n  ]\n}","origin":"    at /home/henrique-work/Repositories/studies/credit-analysis-orchestrator/tests/integration/creditAnalysisAgent.test.js:130:15\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","type":"log"},{"message":"deve retornar aprovado quando todos os dados são válidos 2:\n {\n  resultado: 'aprovado',\n  justificativa: 'Todas as condições foram integralmente cumpridas: o solicitante possui idade igual ou superior a 18 anos, a soma da idade com o prazo do financiamento resulta em 22 anos (inferior ao limite de 75 anos), o score de crédito é 620 (acima do mínimo exigido de 500), a parcela mensal representa 30% da renda (dentro do limite permitido), não há restrições legais vinculadas ao CPF e não há registro de óbito associado ao CPF.',\n  regrasAprovadas: [\n    'Idade do solicitante igual ou superior a 18 anos',\n    'Soma da idade do solicitante com o prazo solicitado para financiamento inferior a 75 anos',\n    'Score de crédito igual ou superior a 500',\n    'Parcela mensal correspondente a no máximo 30% da renda mensal declarada',\n    'Ausência de restrições legais vinculadas ao CPF do solicitante',\n    'Ausência de registro de óbito associado ao CPF do solicitante'\n  ],\n  regrasRejeitadas: []\n}","origin":"    at /home/henrique-work/Repositories/studies/credit-analysis-orchestrator/tests/integration/creditAnalysisAgent.test.js:130:15\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","type":"log"},{"message":"deve retornar aprovado quando todos os dados são válidos 3:\n {\n  resultado: 'aprovado',\n  justificativa: 'Todas as condições foram integralmente cumpridas: o solicitante possui idade igual ou superior a 18 anos, a soma da idade com o prazo do financiamento resulta em 64 anos (inferior ao limite de 75 anos), o score de crédito é 620 (acima do mínimo exigido de 500), a parcela mensal representa menos de 30% da renda declarada, não há restrições legais vinculadas ao CPF e não há registro de óbito associado ao CPF.',\n  regrasAprovadas: [\n    'Idade do solicitante igual ou superior a 18 anos',\n    'Soma da idade do solicitante com o prazo solicitado para financiamento inferior a 75 anos',\n    'Score de crédito fornecido por provedor externo igual ou superior a 500',\n    'Parcela mensal correspondente a no máximo 30% da renda mensal declarada',\n    'Ausência de restrições legais vinculadas ao CPF do solicitante',\n    'Ausência de registro de óbito associado ao CPF do solicitante'\n  ],\n  regrasRejeitadas: []\n}","origin":"    at /home/henrique-work/Repositories/studies/credit-analysis-orchestrator/tests/integration/creditAnalysisAgent.test.js:130:15\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","type":"log"}]},"attachInfos":{}})